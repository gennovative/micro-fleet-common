{"version":3,"sources":["app/validators/ValidationError.ts"],"names":[],"mappings":";;AAEA,+DAAiD;AAwBjD;;GAEG;AACH,qBAA6B,SAAQ,gCAAS;IAI7C,YAAY,OAAkC;QAC7C,KAAK,CAAC,IAAI,EAAE,KAAK,EAAE,eAAe,CAAC,CAAC;QACpC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;IAC5B,CAAC;IAEO,YAAY,CAAC,UAAqC;QACzD,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QAClB,EAAE,CAAC,CAAC,CAAC,UAAU,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;YAAC,MAAM,CAAC;QAAC,CAAC;QAElD,UAAU,CAAC,OAAO,CAAC,CAAC;YACnB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;gBACjB,OAAO,EAAE,CAAC,CAAC,OAAO;gBAClB,IAAI,EAAE,CAAC,CAAC,IAAI;gBACZ,KAAK,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK;aACtB,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;IACJ,CAAC;CACD;AArBD,0CAqBC","file":"ValidationError.js","sourcesContent":["import * as joi from 'joi';\r\n\r\nimport { Exception } from 'back-lib-common-util';\r\n\r\n\r\n/**\r\n * Represents a validation error for a property.\r\n * UI Form should use this information to highlight the particular input.\r\n */\r\nexport interface IValidationErrorItem {\r\n\t/**\r\n\t * Error message for this item.\r\n\t */\r\n\tmessage: string;\r\n\r\n\t/**\r\n\t * Path to the target property in validation schema.\r\n\t */\r\n\tpath: string;\r\n\r\n\t/**\r\n\t * The invalid property value.\r\n\t */\r\n\tvalue: any;\r\n}\r\n\r\n/**\r\n * Represents an error when a model does not pass validation.\r\n */\r\nexport class ValidationError extends Exception {\r\n\t\r\n\tprivate details: IValidationErrorItem[];\r\n\r\n\tconstructor(details: joi.ValidationErrorItem[]) {\r\n\t\tsuper(null, false, ValidationError);\r\n\t\tthis.parseDetails(details);\r\n\t}\r\n\r\n\tprivate parseDetails(joiDetails: joi.ValidationErrorItem[]): void {\r\n\t\tthis.details = [];\r\n\t\tif (!joiDetails || !joiDetails.length) { return; }\r\n\r\n\t\tjoiDetails.forEach(d => {\r\n\t\t\tthis.details.push({\r\n\t\t\t\tmessage: d.message,\r\n\t\t\t\tpath: d.path,\r\n\t\t\t\tvalue: d.context.value\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}"]}