{"version":3,"sources":["app/models/settings/DatabaseSettings.ts"],"names":[],"mappings":";;AAAA,yEAA+D;AAE/D,+CAAiE;AAGjE;;GAEG;AACH,sBAA8B,SAAQ,KAAkB;IAIvD,YAAY,GAAG,KAA4B;QAC1C,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,aAAa,GAAG,yBAAW,CAAC,UAAU,CAAC,KAAK,CAAC;YACjD,IAAI,EAAE,yCAAC,CAAC,WAAW;YACnB,QAAQ,EAAE,iCAAmB,CAAC,MAAM;YACpC,KAAK,EAAE,GAAG;SACV,CAAC,CAAC;QAEH,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC9B,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IAC/C,CAAC;IAED;;OAEG;IACH,IAAW,KAAK;QACf,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IAC3C,CAAC;IAED;;OAEG;IACI,cAAc,CAAC,IAAyB;QAC9C,IAAI,KAAK,GAAG,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC/C,IAAI,CAAC,OAAO,CAAC,CAAC,CAAM,EAAE,CAAC;YACtB,CAAC,CAAC,IAAI,IAAI,KAAK,CAAC,CAAC,4BAA4B;YAC7C,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACd,CAAC,CAAC,CAAC;QAEH,IAAI,OAAO,GAAQ,IAAI,CAAC,aAAa,CAAC;QACtC,OAAO,CAAC,KAAK,GAAG,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;IAClC,CAAC;CACD;AApCD,4CAoCC","file":"DatabaseSettings.js","sourcesContent":["import { DbSettingKeys as S } from 'back-lib-common-constants';\r\n\r\nimport { SettingItem, SettingItemDataType } from './SettingItem';\r\nimport { DbConnectionSetting } from './DbConnectionSetting';\r\n\r\n/**\r\n * Wraps an array of database settings.\r\n */\r\nexport class DatabaseSettings extends Array<SettingItem> {\r\n\t// private _conns: DbConnectionSettings[];\r\n\tprivate _countSetting: SettingItem;\r\n\r\n\tconstructor(...items: DbConnectionSetting[]) {\r\n\t\tsuper();\r\n\t\tthis._countSetting = SettingItem.translator.whole({\r\n\t\t\tname: S.DB_NUM_CONN,\r\n\t\t\tdataType: SettingItemDataType.String,\r\n\t\t\tvalue: '0'\r\n\t\t});\r\n\r\n\t\tthis.push(this._countSetting);\r\n\t\titems.forEach(this.pushConnection.bind(this));\r\n\t}\r\n\r\n\t/**\r\n\t * Gets number of connection settings.\r\n\t */\r\n\tpublic get total(): number {\r\n\t\treturn parseInt(this._countSetting.value);\r\n\t}\r\n\r\n\t/**\r\n\t * Adds a database connection setting.\r\n\t */\r\n\tpublic pushConnection(conn: DbConnectionSetting) {\r\n\t\tlet total = parseInt(this._countSetting.value);\r\n\t\tconn.forEach((c: any, i) => {\r\n\t\t\tc.name += total; // 'DB_HOST_' => 'DB_HOST_1'\r\n\t\t\tthis.push(c);\r\n\t\t});\r\n\r\n\t\tlet setting: any = this._countSetting;\r\n\t\tsetting.value = (total + 1) + '';\r\n\t}\r\n}"]}